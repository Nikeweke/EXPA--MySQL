(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{180:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"triggers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#triggers","aria-hidden":"true"}},[s._v("#")]),s._v(" TRIGGERS")]),s._v(" "),a("h6",{attrs:{id:"—Ç—Ä–∏–≥–≥–µ—Ä-—Å-1-–∫–æ–º–º–∞–Ω–¥–æ–π"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#—Ç—Ä–∏–≥–≥–µ—Ä-—Å-1-–∫–æ–º–º–∞–Ω–¥–æ–π","aria-hidden":"true"}},[s._v("#")]),s._v(" –¢—Ä–∏–≥–≥–µ—Ä —Å 1 –∫–æ–º–º–∞–Ω–¥–æ–π")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("ins_employees"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("AFTER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("employees"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n   "),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" trigga "),a("span",{attrs:{class:"token keyword"}},[s._v("Set")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("text")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'insert in employees'")]),s._v("\n")])])]),a("h6",{attrs:{id:"—Ç—Ä–∏–≥–≥–µ—Ä-—Å-2-–∫–æ–º–º–∞–Ω–¥–∞–º–∏-—Å–≤—è–∑—å-–º–µ–∂–¥—É-–¥–≤—É–º—è-—Ç–∞–±n–∞–º–∏-–Ω–∞-—É–¥–∞n–µ–Ω–∏–µ-–ø–æ—Ån–µ-–∫–∞–∂–¥–æ–π-–∫–æ–º–º–∞–Ω–¥—ã-—Å—Ç–∞–≤–∏—Ç—å"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#—Ç—Ä–∏–≥–≥–µ—Ä-—Å-2-–∫–æ–º–º–∞–Ω–¥–∞–º–∏-—Å–≤—è–∑—å-–º–µ–∂–¥—É-–¥–≤—É–º—è-—Ç–∞–±n–∞–º–∏-–Ω–∞-—É–¥–∞n–µ–Ω–∏–µ-–ø–æ—Ån–µ-–∫–∞–∂–¥–æ–π-–∫–æ–º–º–∞–Ω–¥—ã-—Å—Ç–∞–≤–∏—Ç—å","aria-hidden":"true"}},[s._v("#")]),s._v(" –¢—Ä–∏–≥–≥–µ—Ä —Å 2 –∫–æ–º–º–∞–Ω–¥–∞–º–∏ (–°–≤—è–∑—å –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–∞–±–ª–∞–º–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ) (–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∫–æ–º–º–∞–Ω–¥—ã —Å—Ç–∞–≤–∏—Ç—å - üòâ")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("//")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("del_emp1"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("BEFORE "),a("span",{attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("employees"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" log "),a("span",{attrs:{class:"token keyword"}},[s._v("Set")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("action")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'delete in employees'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" kod "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" kod"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" OLD"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("//")]),s._v("\n")])])]),a("h6",{attrs:{id:"—Ç—Ä–∏–≥–≥–µ—Ä-—Å-if-clause"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#—Ç—Ä–∏–≥–≥–µ—Ä-—Å-if-clause","aria-hidden":"true"}},[s._v("#")]),s._v(" –¢—Ä–∏–≥–≥–µ—Ä —Å IF clause")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("//")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("likes_recounter"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("AFTER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("likes"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" \n"),a("span",{attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v(" \n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" likes_count "),a("span",{attrs:{class:"token keyword"}},[s._v("integer")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("article_id "),a("span",{attrs:{class:"token operator"}},[s._v("<>")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- INSERT INTO logs (table_name, user) VALUES(NEW.article_id, 'here');")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@likes_count")]),s._v(" :"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("count")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token operator"}},[s._v("*")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" likes "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" article_id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("article_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" articles "),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" likes "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@likes_count")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" articles"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("article_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("answer_id "),a("span",{attrs:{class:"token operator"}},[s._v("<>")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- INSERT INTO logs (table_name, user) VALUES(NEW.article_id, 'here1');")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@likes_count")]),s._v(" :"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("count")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token operator"}},[s._v("*")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" likes "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" answer_id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("answer_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" answers "),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" likes "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@likes_count")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" answers"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("answer_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("question_id "),a("span",{attrs:{class:"token operator"}},[s._v("<>")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- INSERT INTO logs (table_name, user) VALUES(NEW.article_id, 'here2');")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@likes_count")]),s._v(" :"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("count")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token operator"}},[s._v("*")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" likes "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" question_id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("question_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" articles "),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" likes "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@likes_count")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" question"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("question_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- INSERT INTO logs (table_name, user) VALUES(NEW.article_id, 'here3');")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n"),a("span",{attrs:{class:"token comment"}},[s._v("//")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h6",{attrs:{id:"trigger-on-update-–º–æ–∂–µ—Ç-–Ω–µ-—Ä–∞–±–æ—Ç–∞—Ç—å"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trigger-on-update-–º–æ–∂–µ—Ç-–Ω–µ-—Ä–∞–±–æ—Ç–∞—Ç—å","aria-hidden":"true"}},[s._v("#")]),s._v(" Trigger on UPDATE (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" update_emp  "),a("span",{attrs:{class:"token comment"}},[s._v("-- –Ω–∞–∑–≤. —Ç—Ä–∏–≥–µ—Ä–∞")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" Employees "),a("span",{attrs:{class:"token comment"}},[s._v("-- –Ω–∞ –∫–∞–∫—É—é —Ç–∞–±–ª–∏—Ü—É —Å—Ç–∞–≤–∏—Ç—å—Å—è")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("-- –Ω–∞ –∫–∞–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@FIO")]),s._v(" NVARCHAR"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("150")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DATETIME")]),s._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" GETDATE"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("UPDATE")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NAME"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" EMO_LOG "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("FIO"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("DATE_IN"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'UPDATED'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n\nGO\n")])])]),a("h6",{attrs:{id:"trigger-on-delete-–º–æ–∂–µ—Ç-–Ω–µ-—Ä–∞–±–æ—Ç–∞—Ç—å"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trigger-on-delete-–º–æ–∂–µ—Ç-–Ω–µ-—Ä–∞–±–æ—Ç–∞—Ç—å","aria-hidden":"true"}},[s._v("#")]),s._v(" Trigger on DELETE (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" updateemp2\n"),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" Employees\n"),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" GETDATE"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token comment"}},[s._v("--")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" EMO_LOG "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("FIO"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("DATE_IN"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'DELETED'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("ROLLBACK")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TRAN")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\nGO\n")])])]),a("h6",{attrs:{id:"trigger-on-insert-–º–æ–∂–µ—Ç-–Ω–µ-—Ä–∞–±–æ—Ç–∞—Ç—å"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trigger-on-insert-–º–æ–∂–µ—Ç-–Ω–µ-—Ä–∞–±–æ—Ç–∞—Ç—å","aria-hidden":"true"}},[s._v("#")]),s._v(" Trigger on INSERT (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" updateemp\n"),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" Employees\n"),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@FIO")]),s._v(" NVARCHAR"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("150")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DATETIME")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" GETDATE"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token comment"}},[s._v("--")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@FIO")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" NAME "),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token string"}},[s._v("' '")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" SURNAME "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" inserted\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" EMO_Log "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("FIO"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" date_in"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token variable"}},[s._v("@FIO")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@DATE_IN")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\nGO\n")])])])])}],!1,null,null,null);e.options.__file="triggers.md";t.default=e.exports}}]);