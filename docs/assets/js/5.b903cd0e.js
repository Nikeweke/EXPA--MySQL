(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{187:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"cursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cursor","aria-hidden":"true"}},[s._v("#")]),s._v(" CURSOR")]),s._v(" "),a("h6",{attrs:{id:"create-cursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-cursor","aria-hidden":"true"}},[s._v("#")]),s._v(" CREATE CURSOR")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" CUSTCURS "),a("span",{attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Customers\n"),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_email "),a("span",{attrs:{class:"token operator"}},[s._v("IS")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- open cursor")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" CUSTCURS\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- close cursor")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" CUSTCURS\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DEALLOCATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" CUSTCURS\n")])])]),a("h6",{attrs:{id:"пример-курсора"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#пример-курсора","aria-hidden":"true"}},[s._v("#")]),s._v(" Пример курсора")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("-- создаем курсор для запроса")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" CUST "),a("span",{attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" cust_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cust_name"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cust_adress "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Customers "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_email "),a("span",{attrs:{class:"token operator"}},[s._v("IS")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- открываем курсор")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" CUST\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- переменные")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@id")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{attrs:{class:"token variable"}},[s._v("@name")]),s._v(" NVARCHAR"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("50")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{attrs:{class:"token variable"}},[s._v("@address")]),s._v(" NVARCHAR"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("40")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("NEXT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" CUST "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@id")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@name")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@address")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("WHILE")]),s._v(" @"),a("span",{attrs:{class:"token variable"}},[s._v("@FETCH_STATUS")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("print")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'номер по порядку '")]),a("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("convert")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nvarchar"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("10")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@id")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),a("span",{attrs:{class:"token string"}},[s._v("' адрес проживания : '")]),a("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),a("span",{attrs:{class:"token variable"}},[s._v("@address")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("' имя '")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{attrs:{class:"token variable"}},[s._v("@name")]),s._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("NEXT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" CUST\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("-- закрываем курсор")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" CUST\n"),a("span",{attrs:{class:"token keyword"}},[s._v("DEALLOCATE")]),s._v(" CUST\n")])])]),a("h6",{attrs:{id:"пример-курсора-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#пример-курсора-2","aria-hidden":"true"}},[s._v("#")]),s._v(" Пример курсора 2")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" curdemo"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" done "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" a "),a("span",{attrs:{class:"token keyword"}},[s._v("CHAR")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("16")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" b"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("c "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" cur1 "),a("span",{attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token keyword"}},[s._v("data")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" test"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t1"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" cur2 "),a("span",{attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" i "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" test"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t2"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("CONTINUE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("HANDLER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" SQLSTATE "),a("span",{attrs:{class:"token string"}},[s._v("'02000'")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" done "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" cur1"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" cur2"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("REPEAT")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" cur1 "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" a"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" cur2 "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" c"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" done "),a("span",{attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n       "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" b "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v(" c "),a("span",{attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n          "),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" test"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t3 "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("b"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       "),a("span",{attrs:{class:"token keyword"}},[s._v("ELSE")]),s._v("\n          "),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" test"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t3 "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("c"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nUNTIL done "),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("REPEAT")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" cur1"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" cur2"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])])])])}],!1,null,null,null);r.options.__file="cursor.md";t.default=r.exports}}]);